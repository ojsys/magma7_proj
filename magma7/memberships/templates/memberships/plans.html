{% extends 'base.html' %}
{% load humanize %}
{% block title %}Membership Plans â€¢ Magma7Fitness{% endblock %}
{% block content %}

<!-- Hero Section -->
<section class="hero-simple" style="padding: 80px 20px; background: var(--light-bg); text-align: center;">
  <div style="max-width: 1200px; margin: 0 auto;">
    <h1 style="font-size: 3rem; font-weight: 800; color: var(--text-primary); margin: 0 auto 1.5rem auto; text-transform: uppercase;">Choose Your Plan</h1>
    <p style="color: var(--text-secondary); font-size: 1.1rem; max-width: 700px; margin: 0 auto; line-height: 1.6;">Transform your body and mind with our flexible membership options designed for every fitness level and goal.</p>
  </div>
</section>

<div class="container animate-fade-up">
  <div class="section" style="padding: 60px 0;">

    <!-- Pricing Toggle (if needed in future) -->
    <div class="row">
      <div class="col s12 center" style="margin-bottom: 50px;">
        <p style="color: var(--text-secondary); font-size: 1.1rem;">
          All plans include access to our state-of-the-art facilities and expert guidance
        </p>
      </div>
    </div>

    <!-- Plans Grid -->
    <div class="row pricing" style="display: flex; flex-wrap: wrap;">
      {% for plan in plans %}
        <div class="col s12 m6 l4" style="display: flex;">
          <div class="card hoverable {% if plan.is_featured %}featured{% endif %}" style="width: 100%; display: flex; flex-direction: column; overflow: hidden;">

            <!-- Featured Image -->
            {% if plan.image_url %}
              <div style="width: 100%; height: 220px; overflow: hidden; position: relative;">
                <img src="{{ plan.image_url }}" alt="{{ plan.name }}" style="width: 100%; height: 100%; object-fit: cover; object-position: center;">
                {% if plan.is_featured %}
                  <div style="position: absolute; top: 15px; right: 15px; background: var(--accent-gold); color: white; padding: 8px 20px; font-size: 0.75rem; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; box-shadow: var(--shadow-md);">
                    Most Popular
                  </div>
                {% endif %}
              </div>
            {% endif %}

            <div class="card-content" style="padding: 40px 30px 30px 30px; flex: 1; display: flex; flex-direction: column;">

              <!-- Plan Name & Duration -->
              <div style="text-align: center; margin-bottom: 30px;">
                <h4 class="card-title" style="margin-bottom: 10px; font-weight: 800; font-size: 1.8rem;">
                  <a href="{% url 'memberships:plan_detail' plan.id %}" style="color: var(--text-primary); text-decoration: none;">{{ plan.name }}</a>
                </h4>
                <p style="color: var(--text-secondary); font-size: 1rem; margin-bottom: 20px;">
                  {{ plan.get_humanized_duration }}
                </p>

                <!-- Price -->
                <div style="margin-bottom: 25px;">
                  <span style="font-size: 2.5rem; font-weight: 900; color: var(--primary-green); line-height: 1.1;">
                    {{ CURRENCY_SYMBOL }}{{ plan.price|intcomma }}
                  </span>
                  <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 8px;">
                    {{ plan.price_period|lower }}
                  </p>
                </div>
              </div>

              <!-- Features List -->
              <div style="margin-bottom: 30px; flex: 1;">
                {% for f in plan.features.all %}
                  <div style="display: flex; align-items: center; margin-bottom: 14px;">
                    <i class="material-icons" style="color: var(--success); margin-right: 12px; font-size: 1.3rem;">check_circle</i>
                    <span style="color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">{{ f.text }}</span>
                  </div>
                {% empty %}
                  <div style="display: flex; align-items: center; margin-bottom: 14px;">
                    <i class="material-icons" style="color: var(--success); margin-right: 12px; font-size: 1.3rem;">check_circle</i>
                    <span style="color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">Access to all facilities</span>
                  </div>
                  <div style="display: flex; align-items: center; margin-bottom: 14px;">
                    <i class="material-icons" style="color: var(--success); margin-right: 12px; font-size: 1.3rem;">check_circle</i>
                    <span style="color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">Professional trainer guidance</span>
                  </div>
                  <div style="display: flex; align-items: center; margin-bottom: 14px;">
                    <i class="material-icons" style="color: var(--success); margin-right: 12px; font-size: 1.3rem;">check_circle</i>
                    <span style="color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">Group fitness classes</span>
                  </div>
                  <div style="display: flex; align-items: center; margin-bottom: 14px;">
                    <i class="material-icons" style="color: var(--success); margin-right: 12px; font-size: 1.3rem;">check_circle</i>
                    <span style="color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">24/7 gym access</span>
                  </div>
                {% endfor %}
              </div>
            </div>

            <!-- Card Actions -->
            <div class="card-action" style="padding: 20px 30px 30px 30px; text-align: center; background: var(--section-bg);">
              {% if user.is_authenticated %}
                <a href="{% url 'memberships:subscribe' plan.id %}" class="btn btn-primary waves-effect waves-light" style="width: 100%; margin-bottom: 10px; font-size: 1rem;">
                  <i class="material-icons left">arrow_forward</i>Choose {{ plan.name }}
                </a>
                <a href="{% url 'memberships:plan_detail' plan.id %}" class="btn btn-ghost waves-effect" style="width: 100%; font-size: 0.95rem;">
                  View Details
                </a>
              {% else %}
                <a href="/accounts/signup/" class="btn btn-primary waves-effect waves-light" style="width: 100%; margin-bottom: 10px; font-size: 1rem;">
                  <i class="material-icons left">person_add</i>Join Now
                </a>
                <a href="{% url 'memberships:plan_detail' plan.id %}" class="btn btn-ghost waves-effect" style="width: 100%; font-size: 0.95rem;">
                  View Details
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      {% empty %}
        <div class="col s12">
          <div class="card" style="text-align: center; padding: 60px 30px;">
            <i class="material-icons" style="font-size: 4rem; color: var(--text-muted); margin-bottom: 20px;">fitness_center</i>
            <h4 style="margin-bottom: 15px;">No Plans Available</h4>
            <p style="color: var(--text-secondary);">
              We're currently updating our membership plans. Please check back later or contact us for more information.
            </p>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Additional Benefits Section -->
    <div class="row" style="margin-top: 80px;">
      <div class="col s12 center">
        <h3 style="margin-bottom: 40px; font-weight: 700;">What's Included in Every Plan</h3>
      </div>

      <div class="col s12 m6 l3">
        <div class="card" style="text-align: center; padding: 30px; height: 100%;">
          <i class="material-icons" style="font-size: 3rem; color: var(--accent-gold); margin-bottom: 20px;">fitness_center</i>
          <h5 style="margin-bottom: 15px; font-weight: 600;">Premium Equipment</h5>
          <p style="color: var(--text-secondary);">
            State-of-the-art cardio and strength training equipment from leading brands
          </p>
        </div>
      </div>

      <div class="col s12 m6 l3">
        <div class="card" style="text-align: center; padding: 30px; height: 100%;">
          <i class="material-icons" style="font-size: 3rem; color: var(--accent-gold); margin-bottom: 20px;">groups</i>
          <h5 style="margin-bottom: 15px; font-weight: 600;">Expert Trainers</h5>
          <p style="color: var(--text-secondary);">
            Certified personal trainers available to help you reach your fitness goals
          </p>
        </div>
      </div>

      <div class="col s12 m6 l3">
        <div class="card" style="text-align: center; padding: 30px; height: 100%;">
          <i class="material-icons" style="font-size: 3rem; color: var(--accent-gold); margin-bottom: 20px;">sports_gymnastics</i>
          <h5 style="margin-bottom: 15px; font-weight: 600;">Group Classes</h5>
          <p style="color: var(--text-secondary);">
            Wide variety of group fitness classes including yoga, HIIT, and dance
          </p>
        </div>
      </div>

      <div class="col s12 m6 l3">
        <div class="card" style="text-align: center; padding: 30px; height: 100%;">
          <i class="material-icons" style="font-size: 3rem; color: var(--accent-gold); margin-bottom: 20px;">schedule</i>
          <h5 style="margin-bottom: 15px; font-weight: 600;">Flexible Hours</h5>
          <p style="color: var(--text-secondary);">
            Extended hours to fit your schedule, with 24/7 access available
          </p>
        </div>
      </div>
    </div>

    <!-- CTA Section -->
    <div class="row" style="margin-top: 60px;">
      <div class="col s12">
        <div class="cta-section" {% if site_settings.cta_image_url %}style="background-image: linear-gradient(rgba(11, 110, 79, 0.9), rgba(11, 110, 79, 0.9)), url('{{ site_settings.cta_image_url }}');"{% endif %}>
          <div class="cta-content">
            {% if site_settings.cta_image_url %}
              <div class="cta-image">
                <img src="{{ site_settings.cta_image_url }}" alt="Fitness transformation" />
              </div>
            {% endif %}
            <div class="cta-text">
              <h3>{{ site_settings.cta_headline|default:"Ready to Start?" }}</h3>
              <p>{{ site_settings.cta_description|default:"Join thousands of satisfied members who have transformed their lives at Magma7Fitness" }}</p>
              <div class="cta-buttons">
                {% if not user.is_authenticated %}
                  <a href="{{ site_settings.cta_primary_url|default:'/accounts/signup/' }}" class="btn btn-large btn-primary">
                    <i class="material-icons left">person_add</i>{{ site_settings.cta_primary_text|default:"Sign Up Today" }}
                  </a>
                  <a href="{{ site_settings.cta_secondary_url|default:'/about/' }}" class="btn btn-large btn-outline">
                    <i class="material-icons left">info</i>{{ site_settings.cta_secondary_text|default:"Learn More" }}
                  </a>
                {% else %}
                  <a href="{{ site_settings.cta_secondary_url|default:'/about/' }}" class="btn btn-large btn-primary">
                    <i class="material-icons left">info</i>Contact Us
                  </a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
